<style>
  .nav-dropdown {
    position: relative;
    display: inline-block;
  }
  
  .nav-dropdown-toggle {
    cursor: pointer;
    padding: 0.5rem 1rem;
    color: var(--fg);
    text-decoration: none;
    transition: opacity 0.2s;
  }
  
  .nav-dropdown-toggle:hover {
    opacity: 0.7;
  }
  
  .nav-dropdown-menu {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    min-width: 150px;
    z-index: 1000;
    margin-top: 0.5rem;
  }
  
  .nav-dropdown-menu a {
    display: block;
    padding: 0.75rem 1rem;
    color: var(--fg);
    text-decoration: none;
    transition: background 0.2s;
    border-bottom: 1px solid var(--border);
  }
  
  .nav-dropdown-menu a:last-child {
    border-bottom: none;
  }
  
  .nav-dropdown-menu a:hover {
    background: var(--hover-bg);
  }
  
  .nav-dropdown-menu a:first-child {
    border-radius: 8px 8px 0 0;
  }
  
  .nav-dropdown-menu a:last-child {
    border-radius: 0 0 8px 8px;
  }
  
  .nav-dropdown:hover .nav-dropdown-menu {
    display: block;
  }
  
  /* Mobile adjustments */
  @media (max-width: 768px) {
    .nav-dropdown-menu {
      right: 0;
      left: auto;
    }
  }
  
  /* Dark mode shadow */
  [data-theme="dark"] .nav-dropdown-menu {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }
</style>

<script>
  // Add click functionality for mobile
  document.addEventListener('DOMContentLoaded', function() {
    const dropdown = document.querySelector('.nav-dropdown');
    const toggle = document.querySelector('.nav-dropdown-toggle');
    const menu = document.querySelector('.nav-dropdown-menu');
    
    if (dropdown && toggle && menu) {
      // For touch devices, use click instead of hover
      if ('ontouchstart' in window) {
        toggle.addEventListener('click', function(e) {
          e.preventDefault();
          menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
        });
        
        // Close menu when clicking outside
        document.addEventListener('click', function(e) {
          if (!dropdown.contains(e.target)) {
            menu.style.display = 'none';
          }
        });
      }
    }
  });
</script>

<nav class="nav">
  <div class="nav-left">
    <a href="/" style="font-weight: bold;">slocial.org</a>
    <span class="member-count">At least 1 member and not counting</span>
  </div>
  <div class="nav-right">
    <a href="/">üìñ Read</a>
    <a href="/tags">üè∑Ô∏è Explore Tags</a>
    <% if (user) { %>
      <div class="nav-dropdown">
        <span class="nav-dropdown-toggle">‚úçÔ∏è Write ‚ñº</span>
        <div class="nav-dropdown-menu">
          <a href="/compose">Compose</a>
          <a href="/drafts">Drafts</a>
          <a href="/profile">Profile</a>
        </div>
      </div>
      <% if (user.is_admin) { %>
        <a href="/admin" class="admin-link">Admin</a>
      <% } %>
      <form action="/logout" method="post" style="display:inline">
        <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
        <button type="submit">Sign out</button>
      </form>
      <span class="handle">@<%= user.handle %></span>
    <% } else { %>
      <a href="/login">Sign in</a>
      <a href="/signup">Create account</a>
    <% } %>
  </div>
</nav>


